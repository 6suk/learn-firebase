"use strict";(self.webpackChunknwitter=self.webpackChunknwitter||[]).push([[14],{1014:function(e,t,n){n.r(t),n.d(t,{default:function(){return A}});var r,a,s,i=n(168),c=n(4165),u=n(5861),o=n(9439),l=n(2660),p=n(2481),d=n(2791),f=n(276),x=n(9161),m=n(4261),h=n(9434),v=n(7689),g=n(2683),j=n(4802),Z=n(1632),w=n(9806),y=n(184),k=function(e){var t=e.image,n=e.setImage,r=(0,h.v9)((function(e){return e.user})).isLogin;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("input",{id:"attach-file",type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0];if(!(0,x.x)(t)){var r=new FileReader;r.addEventListener("loadend",(function(e){n(r.result)})),r.readAsDataURL(t)}},className:"factoryInput__file",disabled:!r}),t?(0,y.jsxs)("div",{className:"factoryForm__clear",onClick:function(){return n("")},children:[(0,y.jsx)("span",{children:"Remove"}),(0,y.jsx)(w.G,{icon:Z.NBC})]}):(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)("label",{htmlFor:"attach-file",className:"factoryInput__label",children:[(0,y.jsx)("span",{children:"Add photos"}),(0,y.jsx)(w.G,{icon:Z.r8p})]})}),t&&(0,y.jsx)("div",{className:"factoryForm__attachment",children:(0,y.jsx)("img",{src:t,style:{backgroundImage:t},alt:"\ubbf8\ub9ac\ubcf4\uae30"})})]})},b=function(e){var t=e.setAction,n=t.setDataBase,r=t.setStorage,a=(0,d.useState)(""),s=(0,o.Z)(a,2),i=s[0],l=s[1],p=(0,h.v9)((function(e){return e.user})).user,f=function(){var e=(0,u.Z)((0,c.Z)().mark((function e(t){var a;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(p.uid,i);case 2:return a=e.sent,e.next=5,n(p.uid,t,a);case 5:l("");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=(0,j.Z)("",f,!0),m=(0,o.Z)(x,3),v=m[0],g=m[1],Z=m[2];return(0,y.jsxs)("form",{action:"",onSubmit:Z,className:"factoryForm",children:[(0,y.jsxs)("div",{className:"factoryInput__container",children:[(0,y.jsx)("input",{type:"text",placeholder:p?"\ub0b4\uc6a9 \uc791\uc131":"\ub85c\uadf8\uc778 \ud6c4 \uc774\uc6a9 \uac00\ub2a5 \ud569\ub2c8\ub2e4!",maxLength:120,value:v,onChange:g,className:"factoryInput__input",disabled:!p}),(0,y.jsx)("input",{type:"submit",value:"\u2192",className:"factoryInput__arrow",disabled:!p})]}),(0,y.jsx)(k,{image:i,setImage:l})]})},_=n(4519),S=function(e){var t=e.post,n=t.imageUrl,r=t.id,a=t.post,s=t.date,i=e.toggleEdit,l=e.updateAction,p=l.updateStorage,f=l.updateDataBase,m=(0,h.v9)((function(e){return e.user.user})).uid,v=(0,d.useState)(n||""),g=(0,o.Z)(v,2),Z=g[0],w=g[1],b=function(){var e=(0,u.Z)((0,c.Z)().mark((function e(t){var a;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(m,Z,n);case 2:return a=e.sent,e.next=5,f(r,t,a);case 5:i();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=(0,j.Z)(a,b),S=(0,o.Z)(_,3),B=S[0],N=S[1],D=S[2];return(0,y.jsxs)("form",{onSubmit:D,className:"container nweetEdit",children:[(0,y.jsx)("input",{type:"text",onChange:N,value:B,required:!0,autoFocus:!0,maxLength:120}),(0,y.jsx)("p",{children:(0,x.G)(s)}),(0,y.jsx)(k,{image:Z,setImage:w}),(0,y.jsxs)("div",{className:"editBtns",children:[(0,y.jsx)("button",{onClick:i,className:"formBtn cancelBtn",children:"\ucde8\uc18c"}),(0,y.jsx)("input",{type:"submit",value:"\uc218\uc815 \uc644\ub8cc",className:"formBtn"})]})]})},B=function(e){var t=e.post,n=e.isOwner,r=e.deleteAction,a=r.deleteDataBase,s=r.deleteStroage,i=e.updateAction,l=(0,h.I0)(),p=(0,d.useState)(!1),f=(0,o.Z)(p,2),m=f[0],v=f[1],g=function(){v(!m),l((0,_.K)())},j=function(){var e=(0,u.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("\uc815\ub9d0 \uc0ad\uc81c\ud558\uc2e4\uac74\uac00\uc694?")){e.next=6;break}return e.next=4,s(t.imageUrl);case 4:return e.next=6,a(t.id);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,y.jsx)("li",{className:"nweet",children:m?(0,y.jsx)(S,{post:t,toggleEdit:g,updateAction:i}):(0,y.jsxs)(y.Fragment,{children:[t.imageUrl&&(0,y.jsx)("img",{src:t.imageUrl,alt:t.id,style:{maxWidth:"100px"}}),(0,y.jsx)("h4",{children:t.post}),(0,y.jsxs)("p",{children:[t.displayName," ",(0,y.jsx)("span",{children:(0,x.G)(t.date)})]}),n&&(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)("div",{className:"nweet__actions",children:[(0,y.jsx)("span",{onClick:j,children:(0,y.jsx)(w.G,{icon:Z.$aW})}),(0,y.jsx)("span",{onClick:g,children:(0,y.jsx)(w.G,{icon:Z.UJf})})]})})]})})},N=(0,g.F4)(r||(r=(0,i.Z)(["\n  0% {\n    opacity: 0;\n  }\n  50% {\n    opacity: 0.5;\n  }\n  100% {\n    opacity: 1;\n  }\n"]))),D=g.zo.div(a||(a=(0,i.Z)(["\n  animation: "," 0.5s ease-in-out forwards;\n"])),N),F=g.zo.ul(s||(s=(0,i.Z)(["\n  margin-top: 30px;\n"]))),A=function(){var e=(0,v.UO)().type,t=(0,h.v9)((function(e){return e.postToggle})).postFormToggle,n=(0,h.v9)((function(e){return e.user})),r=n.myPostList,a=n.user,s=n.isLogin,i=(0,h.v9)((function(e){return e.postList.data})),g=function(){var e=(0,d.useState)(!1),t=(0,o.Z)(e,2),n=t[0],r=t[1],a=function(){var e=(0,u.Z)((0,c.Z)().mark((function e(t,n,a){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.ET)(l.ep,{date:Date.now(),post:n,uid:t,imageUrl:a});case 2:r(!0);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),s=function(){var e=(0,u.Z)((0,c.Z)().mark((function e(t,n,a){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.r7)((0,l.u7)(t),{post:n,imageUrl:a});case 2:r(!0);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),i=function(){var e=(0,u.Z)((0,c.Z)().mark((function e(t){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.oe)((0,l.u7)(t));case 2:r(!0);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{isDone:n,setDataBase:a,updateDataBase:s,deleteDataBase:i}}(),j=g.setDataBase,Z=g.updateDataBase,w=g.deleteDataBase,k=function(){var e=function(){var e=(0,u.Z)((0,c.Z)().mark((function e(t,n){var r,a,s;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="",""===n){e.next=9;break}return a=(0,f.iH)(l.tO,"".concat(t,"/").concat((0,m.Z)())),e.next=5,(0,f.sf)(a,n,"data_url");case 5:return s=e.sent,e.next=8,(0,f.Jt)(s.ref);case 8:r=e.sent;case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),t=function(){var e=(0,u.Z)((0,c.Z)().mark((function e(t){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,x.x)(t)){e.next=10;break}return e.prev=1,n=(0,f.iH)(l.tO,t),e.next=5,(0,f.oq)(n);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),n=function(){var n=(0,u.Z)((0,c.Z)().mark((function n(r,a,s){var i;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a===s){n.next=9;break}return n.next=3,t(s);case 3:return n.next=5,e(r,a);case 5:return i=n.sent,n.abrupt("return",i);case 9:return n.abrupt("return",s);case 10:case"end":return n.stop()}}),n)})));return function(e,t,r){return n.apply(this,arguments)}}();return{setStorage:e,updateStorage:n,deleteStroage:t}}(),_=k.setStorage,S=k.updateStorage,N=k.deleteStroage,A={setDataBase:j,setStorage:_},C={updateDataBase:Z,updateStorage:S},I={deleteDataBase:w,deleteStroage:N},U=(0,d.useMemo)((function(){return"user"===e?r:i}),[e,r,i]);return(0,y.jsxs)(y.Fragment,{children:[t&&(0,y.jsx)(b,{setAction:A}),(0,y.jsx)(D,{children:(0,y.jsx)(y.Fragment,{children:(0,x.x)(U)?(0,y.jsx)("div",{className:"nweet__nopost",children:"\ub4f1\ub85d\ub41c \uac8c\uc2dc\ubb3c\uc774 \uc5c6\uc5b4\uc694!"}):(0,y.jsx)(F,{children:U.map((function(e){var t=s&&a.uid===e.uid;return(0,y.jsx)(B,{post:e,isOwner:t,updateAction:C,deleteAction:I},e.id)}))})})})]})}}}]);
//# sourceMappingURL=14.436f3c65.chunk.js.map