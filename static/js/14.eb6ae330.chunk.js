"use strict";(self.webpackChunknwitter=self.webpackChunknwitter||[]).push([[14],{1014:function(e,t,n){n.r(t),n.d(t,{default:function(){return U}});var r,a,s,c=n(168),i=n(4165),u=n(5861),o=n(2660),p=n(2481),l=n(276),d=n(4261),f=n(2791),x=n(9434),m=n(7689),h=n(2683),v=n(9161),g=n(9439),Z=n(4802),j=n(1632),w=n(9806),y=n(7984),k=n(184),b={maxSizeMB:.5,maxWidthOrHeight:150,useWebWorker:!0},_=function(e){var t=e.image,n=e.setImage,r=(0,x.v9)((function(e){return e.user})).isLogin,a=function(){var e=(0,u.Z)((0,i.Z)().mark((function e(t){var n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.Z)(t,b);case 2:return n=e.sent,e.next=5,y.Z.getDataUrlFromFile(n);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=(0,u.Z)((0,i.Z)().mark((function e(t){var r,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.target.files,s=r[0],(0,v.x)(s)){e.next=8;break}return e.t0=n,e.next=6,a(s);case 6:e.t1=e.sent,(0,e.t0)(e.t1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("input",{id:"attach-file",type:"file",accept:"image/*",onChange:s,className:"factoryInput__file",disabled:!r}),t?(0,k.jsxs)("div",{className:"factoryForm__clear",onClick:function(){return n("")},children:[(0,k.jsx)("span",{children:"Remove"}),(0,k.jsx)(w.G,{icon:j.NBC})]}):(0,k.jsxs)("label",{htmlFor:"attach-file",className:"factoryInput__label",children:[(0,k.jsx)("span",{children:"Add photos"}),(0,k.jsx)(w.G,{icon:j.r8p})]}),t&&(0,k.jsx)("div",{className:"factoryForm__attachment",children:(0,k.jsx)("img",{src:t,alt:"\ubbf8\ub9ac\ubcf4\uae30"})})]})},S=function(e){var t=e.setAction,n=t.addPost,r=t.setStorage,a=(0,f.useState)(""),s=(0,g.Z)(a,2),c=s[0],o=s[1],p=(0,x.v9)((function(e){return e.user})).user,l=function(){var e=(0,u.Z)((0,i.Z)().mark((function e(t){var a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(p.uid,c);case 2:return a=e.sent,e.next=5,n(p.uid,t,a);case 5:o("");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=(0,Z.Z)("",l,!0),m=(0,g.Z)(d,3),h=m[0],v=m[1],j=m[2];return(0,k.jsxs)("form",{action:"",onSubmit:j,className:"factoryForm",children:[(0,k.jsxs)("div",{className:"factoryInput__container",children:[(0,k.jsx)("input",{type:"text",placeholder:p?"\ub0b4\uc6a9 \uc791\uc131":"\ub85c\uadf8\uc778 \ud6c4 \uc774\uc6a9 \uac00\ub2a5 \ud569\ub2c8\ub2e4!",maxLength:120,value:h,onChange:v,className:"factoryInput__input",disabled:!p}),(0,k.jsx)("input",{type:"submit",value:"\u2192",className:"factoryInput__arrow",disabled:!p})]}),(0,k.jsx)(_,{image:c,setImage:o})]})},N=n(4519),F=function(e){var t=e.post,n=t.imageUrl,r=t.id,a=t.post,s=t.date,c=e.toggleEdit,o=e.updateAction,p=o.updateStorage,l=o.updatePost,d=(0,x.v9)((function(e){return e.user.user})).uid,m=(0,f.useState)(n||""),h=(0,g.Z)(m,2),j=h[0],w=h[1],y=function(){var e=(0,u.Z)((0,i.Z)().mark((function e(t){var a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(d,j,n);case 2:return a=e.sent,e.next=5,l(r,t,a);case 5:c();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=(0,Z.Z)(a,y),S=(0,g.Z)(b,3),N=S[0],F=S[1],P=S[2];return(0,k.jsxs)("form",{onSubmit:P,className:"container nweetEdit",children:[(0,k.jsx)("input",{type:"text",onChange:F,value:N,required:!0,autoFocus:!0,maxLength:120}),(0,k.jsx)("p",{children:(0,v.G)(s)}),(0,k.jsx)(_,{image:j,setImage:w}),(0,k.jsxs)("div",{className:"editBtns",children:[(0,k.jsx)("button",{onClick:c,className:"formBtn cancelBtn",children:"\ucde8\uc18c"}),(0,k.jsx)("input",{type:"submit",value:"\uc218\uc815 \uc644\ub8cc",className:"formBtn"})]})]})},P=function(e){var t=e.post,n=e.isOwner,r=e.deleteAction,a=r.deletePost,s=r.deleteStorage,c=e.updateAction,o=(0,x.I0)(),p=(0,f.useState)(!1),l=(0,g.Z)(p,2),d=l[0],m=l[1],h=function(){m(!d),o((0,N.K)())},Z=function(){var e=(0,u.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("\uc815\ub9d0 \uc0ad\uc81c\ud558\uc2e4\uac74\uac00\uc694?")){e.next=6;break}return e.next=4,s(t.imageUrl);case 4:return e.next=6,a(t.id);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,k.jsx)("li",{className:"nweet",children:d?(0,k.jsx)(F,{post:t,toggleEdit:h,updateAction:c}):(0,k.jsxs)(k.Fragment,{children:[t.imageUrl&&(0,k.jsx)("img",{src:t.imageUrl,alt:t.id,style:{maxWidth:"100px"}}),(0,k.jsx)("h4",{children:t.post}),(0,k.jsxs)("p",{children:[t.displayName," ",(0,k.jsx)("span",{children:(0,v.G)(t.date)})]}),n&&(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)("div",{className:"nweet__actions",children:[(0,k.jsx)("span",{onClick:Z,children:(0,k.jsx)(w.G,{icon:j.$aW})}),(0,k.jsx)("span",{onClick:h,children:(0,k.jsx)(w.G,{icon:j.UJf})})]})})]})})},C=(0,h.F4)(r||(r=(0,c.Z)(["\n  0% {\n    opacity: 0;\n  }\n  50% {\n    opacity: 0.5;\n  }\n  100% {\n    opacity: 1;\n  }\n"]))),A=h.zo.div(a||(a=(0,c.Z)(["\n  animation: "," 0.5s ease-in-out forwards;\n"])),C),I=h.zo.ul(s||(s=(0,c.Z)(["\n  margin-top: 30px;\n"]))),U=function(){var e=(0,m.UO)().type,t=(0,x.v9)((function(e){return e.postToggle})).postFormToggle,n=(0,x.v9)((function(e){return e.user})),r=n.myPostList,a=n.user,s=n.isLogin,c=(0,x.v9)((function(e){return e.postList.data})),h=function(){var e=function(){var e=(0,u.Z)((0,i.Z)().mark((function e(t,n,r){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.ET)(o.ep,{date:Date.now(),post:n,uid:t,imageUrl:r});case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),t=function(){var e=(0,u.Z)((0,i.Z)().mark((function e(t,n,r){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.r7)((0,o.u7)(t),{post:n,imageUrl:r});case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),n=function(){var e=(0,u.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.oe)((0,o.u7)(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{addPost:e,updatePost:t,deletePost:n}}(),g=h.addPost,Z=h.updatePost,j=h.deletePost,w=function(){var e=function(){var e=(0,u.Z)((0,i.Z)().mark((function e(t,n){var r,a,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="",""===n){e.next=9;break}return a=(0,l.iH)(o.tO,"".concat(t,"/").concat((0,d.Z)())),e.next=5,(0,l.sf)(a,n,"data_url");case 5:return s=e.sent,e.next=8,(0,l.Jt)(s.ref);case 8:r=e.sent;case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),t=function(){var e=(0,u.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=10;break}return e.prev=1,n=(0,l.iH)(o.tO,t),e.next=5,(0,l.oq)(n);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),n=function(){var n=(0,u.Z)((0,i.Z)().mark((function n(r,a,s){var c;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a===s){n.next=9;break}return n.next=3,t(s);case 3:return n.next=5,e(r,a);case 5:return c=n.sent,n.abrupt("return",c);case 9:return n.abrupt("return",s);case 10:case"end":return n.stop()}}),n)})));return function(e,t,r){return n.apply(this,arguments)}}();return{setStorage:e,updateStorage:n,deleteStorage:t}}(),y=w.setStorage,b=w.updateStorage,_=w.deleteStorage,N={addPost:g,setStorage:y},F={updatePost:Z,updateStorage:b},C={deletePost:j,deleteStorage:_},U=(0,f.useMemo)((function(){return"user"===e?r:c}),[e,r,c]);return(0,k.jsxs)(k.Fragment,{children:[t&&(0,k.jsx)(S,{setAction:N}),(0,k.jsx)(A,{children:(0,k.jsx)(k.Fragment,{children:(0,v.x)(U)?(0,k.jsx)("div",{className:"nweet__nopost",children:"\ub4f1\ub85d\ub41c \uac8c\uc2dc\ubb3c\uc774 \uc5c6\uc5b4\uc694!"}):(0,k.jsx)(I,{children:U.map((function(e){var t=s&&a.uid===e.uid;return(0,k.jsx)(P,{post:e,isOwner:t,updateAction:F,deleteAction:C},e.id)}))})})})]})}}}]);
//# sourceMappingURL=14.eb6ae330.chunk.js.map